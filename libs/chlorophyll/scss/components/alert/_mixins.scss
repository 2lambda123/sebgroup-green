@use '../../tokens/shame' as tokens;
@forward '../../components/link/mixins' as link-*;
@use '../../common';

$variants: (
  'info': (
    color: tokens.$intent-info-color,
    fadable-color: tokens.$intent-info-fadable-color,
    background: tokens.$intent-info-background,
  ),
  'success': (
    color: tokens.$intent-success-color,
    fadable-color: tokens.$intent-success-fadable-color,
    background: tokens.$intent-success-background,
  ),
  'warning': (
    color: tokens.$intent-warning-color,
    fadable-color: tokens.$intent-warning-fadable-color,
    background: tokens.$intent-warning-background,
  ),
  'danger': (
    color: tokens.$intent-danger-color,
    fadable-color: tokens.$intent-danger-fadable-color,
    background: tokens.$intent-danger-background,
  ),
);

$border-radius: 0;
$border: solid 1px var(--background);
$color: var(--color);
$background: var(--background);
$close-bg-hover: common.stripped-rgb(tokens.$black);

@mixin alert {
  background: $background;
  border-radius: $border-radius;
  border: $border;
  color: $color;
  display: inline-block;
  @include common.padding(5);

  > header {
    align-items: center;
    display: flex;
    justify-content: space-between;
    .close {
      margin: -0.5rem -0.5rem -0.5rem 0.5rem;

      --fadable-foreground-color: #{$close-bg-hover};
      &::before,
      &::after {
        background: var(--color);
      }
    }
  }

  > p {
    @include common.margin-vertical(0);
  }
  a {
    color: inherit;
    text-decoration: underline;
    transition: opacity 300ms ease-in-out;
    &:hover {
      opacity: 0.5;
    }
    &:focus-visible {
      outline-color: currentColor;
    }
  }
  > footer {
    @include common.margin-top(4);
    @include common.media-breakpoint-up('sm') {
      display: flex;
      justify-content: flex-end;
    }
    a {
      display: flex;
    }
    a,
    button,
    .button {
      &:not(.primary, [type='submit']) {
        border-color: currentColor;
        color: currentColor;
      }
      + {
        a,
        button,
        .button {
          @include common.media-breakpoint-only('xs') {
            @include common.margin-top(4);
          }
          @include common.media-breakpoint-up('sm') {
            @include common.margin-start(4);
          }
        }
      }
    }
  }
}

@mixin alert-variant($color, $background) {
  --background: #{$background};
  --color: #{$color};
}
