@layer gds-input-helper, tokens, a11y, containment, shell, core, parts;

@layer gds-input-helper {
  @layer tokens {
    :host {
      --gds-input-helper-bg: hsla(60, 4%, 95%, 1);
      --gds-input-helper-br-width: 2px;
    }
  }

  @layer a11y {
    @media (prefers-color-scheme: dark) {
      :host {
        --gds-input-helper-bg: var(--gds-input-helper-bg-dark);
      }
    }

    @media (prefers-reduced-motion: reduce) {
      :host {
        --gds-input-helper-motion: 0;
      }
    }

    @media (prefers-reduced-transparency: reduce) {
      :host {
        --gds-input-helper-transparency: 1;
      }
    }

    @media (prefers-contrast: more) {
      :host {
        --gds-input-helper-contrast: 1;
      }
    }
  }

  @layer containment {
    :host {
      display: contents;
    }

    .gds-input-helper {
      contain: layout;
      container-name: gds-input-helper;
      container-type: inline-size;
      isolation: isolate;

      @container gds-input-helper (width < 30ch) {
        .gds-input-badge {
          display: none;
        }
      }

      > * {
        box-sizing: border-box;
      }
    }
  }

  @layer shell {
    .gds-input-helper {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
  }

  @layer core {
    .gds-input-helper {
      &:has(slot[name='badge']),
      &:has(slot[name='action']) {
        .gds-input-helper-header {
          padding-inline-end: 8px;
        }
      }

      @layer parts {
        .gds-input-helper-header {
          display: flex;
          flex-direction: row;
          align-items: center;
          justify-content: space-between;
          border-left: var(--gds-input-helper-br-width) solid transparent;
          border-right: var(--gds-input-helper-br-width) solid transparent;
          padding-inline: 18px;
          min-height: 32px;

          .gds-input-helper-options {
            align-items: center;
            margin-inline-start: auto;
            display: flex;
            gap: 8px;
          }
        }

        .gds-input-helper-title {
          font-size: 14px;
          user-select: none;

          &.gds-input-helper-action {
            cursor: pointer;
            appearance: none;
            padding: unset;
            border: unset;
            background: unset;
            outline-offset: 6px;
            outline-color: transparent;
            outline-width: 2px;
            outline-style: solid;
            font-family: inherit;
            font-size: 14px;

            &:focus {
              outline-color: currentColor;
              border-radius: 200px;

              &:not(:focus-visible) {
                outline-color: transparent;
              }
            }
          }
        }

        .gds-input-helper-content {
          border: 1px solid hsla(60, 4%, 80%, 1);
          background-color: hsla(60, 4%, 95%, 1);
          font-size: 14px;
          gap: 8px;
          line-height: 1.4;
          margin-block-start: 8px;
          padding: 12px 16px;
          border-radius: 4px;
          user-select: auto;
        }
      }
    }
  }
}
