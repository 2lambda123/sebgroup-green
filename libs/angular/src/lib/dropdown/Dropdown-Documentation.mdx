import {NggDropdownComponent} from "./dropdown.component";
import {Story} from '@storybook/addon-docs'

# Dropdown

## Importing module

If you're only using the dropdown component, you just need to import the `NggDropdownModule`. The example below uses reactive forms hence it needs the `ReactiveFormsModule` too.

```typescript
import { NgModule } from '@angular/core'
import { BrowserModule } from '@angular/platform-browser'
import { AppComponent } from './app.component'
import { ReactiveFormsModule } from '@angular/forms'
import { NggDropdownModule } from '@sebgroup/green-angular'

@NgModule({
  declarations: [AppComponent],
  imports: [
    BrowserModule,
    ReactiveFormsModule,
    NggDropdownModule
  ],
  exports: [],
})
export class AppModule {}
```

## Dropdown Select
NggDropdownComponent is a form control for selecting a value from a set of options.

The dropdown supports 2-way binding to the value property without the need for Angular forms,
and supports all the form directives from the core FormsModule (NgModel) and ReactiveFormsModule (FormControl, FormGroup, etc.).

<Story id="components-dropdown--select" />

## 2-way binding without forms
If you just need a simple select without any form, validation etc. it's possible to bind the dropdown directly to a value.


```html
<ngg-dropdown [(value)]="selected" [options]="options"></ngg-dropdown>
```

## Reactive forms
We recommend using <a href="https://angular.io/guide/reactive-forms" target="_blank">Reactive forms</a> in Angular together with the <a href="https://angular.io/api/forms/FormBuilder" target="_blank">From builder</a> especially
if you're dealing with complex or dynamic forms.

```html
<form [formGroup]="dropdownForm">
  <ngg-dropdown formControlName="dropdownSelect" [options]="options"></ngg-dropdown>
</form>
```

## Template-driven forms
Another approach is to use <a href="https://angular.io/guide/forms" target="_blank">Template-driven forms</a>.

```html
<form #dropdownForm="ngForm">
  <ngg-dropdown [(ngModel)]="selected" [options]="options"></ngg-dropdown>
</form>
```

## Options
The dropdown options should be provided as an array of key value pairs. When a user chooses an option that `value` will be selected.

```typescript
const options = [
    { key: 'Tacos', value: 'tacos' },
    { key: 'Pizza', value: 'pizza' },
    { key: 'Sushi', value: 'sushi', selected: true }
  ]
```
Set an initial value by assigning the option `value` to the value input or form controller. Or simply make use of the optional `selected?: boolean` as in the example above.

## Placeholder

The text input can be used to set a placeholder that will be shown when no value is selected.



## Example usage in reactive form

Below is an example of how the component can be used with reactive forms and validations.

<Story id="components-dropdown--form" />


### Markup
```html
<form [formGroup]="validationForm" #ngForm="ngForm" (submit)="save()">
  <div class="form-group" *ngIf="validationForm.get('country') as dropdown">
    <ngg-dropdown
      label="Country"
      [options]="(options$ | async)!"
      formControlName="country"
      text="Select"
      [valid]="dropdown.valid && ngForm.submitted"
      [invalid]="dropdown.invalid && ngForm.submitted"
    >
      <!-- Hint text when not submitted -->
      <ng-container data-form-info *ngIf="!ngForm['submitted']"
        >Select country</ng-container
      >
      <ng-container data-form-info *ngIf="ngForm['submitted']">
        <!-- Text when form control contains one or more errors -->
        <ng-container *ngIf="dropdown.errors as errors">
          <!-- Text for each error (only one will be displayed at a time) -->
          <ng-container *ngIf="errors['required']">Select country</ng-container>
        </ng-container>
      </ng-container>
    </ngg-dropdown>
  </div>
  <button type="submit" [disabled]="ngForm.submitted && validationForm.invalid">
    Save
  </button>
</form>
```
